# NewsNow é¡¹ç›®éƒ¨ç½²æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

NewsNow æ˜¯ä¸€ä¸ªä¼˜é›…çš„å®æ—¶æ–°é—»é˜…è¯»å¹³å°ï¼Œæä¾›æ¸…æ´çš„UIè®¾è®¡å’Œå®æ—¶çƒ­é—¨æ–°é—»æ›´æ–°ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- âœ¨ ä¼˜é›…çš„é˜…è¯»ç•Œé¢è®¾è®¡
- ğŸ“¡ å®æ—¶è·å–æœ€æ–°çƒ­ç‚¹æ–°é—»
- ğŸ” æ”¯æŒ GitHub OAuth ç™»å½•åŠæ•°æ®åŒæ­¥
- âš¡ æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼ˆé»˜è®¤30åˆ†é’Ÿï¼Œç™»å½•ç”¨æˆ·å¯å¼ºåˆ¶åˆ·æ–°ï¼‰
- ğŸš€ åŠ¨æ€æŠ“å–é—´éš”è°ƒæ•´ï¼Œé¿å…IPè¢«å°ç¦
- ğŸ”§ æ”¯æŒ MCP server

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: React 19 + TypeScript + Vite + UnoCSS
- **åç«¯**: Nitro + H3
- **æ•°æ®åº“**: æ”¯æŒå¤šç§æ•°æ®åº“ï¼ˆæ¨è Cloudflare D1ï¼‰
- **éƒ¨ç½²**: Cloudflare Pages / Vercel / Docker

## éƒ¨ç½²æ–¹å¼é€‰æ‹©

### 1. ç®€å•éƒ¨ç½²ï¼ˆæ¨èæ–°æ‰‹ï¼‰
- **é€‚ç”¨åœºæ™¯**: æ— éœ€ç”¨æˆ·ç™»å½•å’Œæ•°æ®ç¼“å­˜
- **å¹³å°**: Cloudflare Pages æˆ– Vercel
- **æ­¥éª¤**: Fork ä»“åº“ â†’ ç›´æ¥å¯¼å…¥å¹³å°

### 2. å®Œæ•´åŠŸèƒ½éƒ¨ç½²
- **é€‚ç”¨åœºæ™¯**: éœ€è¦ç”¨æˆ·ç™»å½•ã€æ•°æ®ç¼“å­˜ç­‰å®Œæ•´åŠŸèƒ½
- **è¦æ±‚**: é…ç½® GitHub OAuth + æ•°æ®åº“
- **æ¨è**: Cloudflare Pages + D1 æ•°æ®åº“

### 3. æœ¬åœ°å¼€å‘éƒ¨ç½²
- **é€‚ç”¨åœºæ™¯**: å¼€å‘æµ‹è¯•ç¯å¢ƒ
- **è¦æ±‚**: Node.js >= 20

### 4. Docker éƒ¨ç½²
- **é€‚ç”¨åœºæ™¯**: æœåŠ¡å™¨è‡ªæ‰˜ç®¡
- **ä¼˜åŠ¿**: ç¯å¢ƒéš”ç¦»ï¼Œæ˜“äºç®¡ç†

## è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### æ–¹å¼ä¸€ï¼šCloudflare Pages éƒ¨ç½²

#### æ­¥éª¤ 1: åŸºç¡€éƒ¨ç½²
1. Fork æœ¬é¡¹ç›®åˆ°æ‚¨çš„ GitHub è´¦æˆ·
2. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
3. è¿›å…¥ Pages â†’ åˆ›å»ºé¡¹ç›® â†’ è¿æ¥åˆ° Git
4. é€‰æ‹©æ‚¨ fork çš„ä»“åº“
5. é…ç½®æ„å»ºè®¾ç½®ï¼š
   - **æ„å»ºå‘½ä»¤**: `pnpm run build`
   - **è¾“å‡ºç›®å½•**: `dist/output/public`
6. ç‚¹å‡»éƒ¨ç½²

#### æ­¥éª¤ 2: é…ç½®å®Œæ•´åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€è¦ç”¨æˆ·ç™»å½•å’Œç¼“å­˜åŠŸèƒ½ï¼š

1. **åˆ›å»º GitHub OAuth App**
   - è®¿é—® [GitHub Developer Settings](https://github.com/settings/applications/new)
   - åº”ç”¨åç§°: `NewsNow`
   - ä¸»é¡µURL: `https://your-domain.pages.dev`
   - å›è°ƒURL: `https://your-domain.pages.dev/api/oauth/github`
   - æ— éœ€ç‰¹æ®Šæƒé™
   - è®°å½• `Client ID` å’Œ `Client Secret`

2. **åˆ›å»º D1 æ•°æ®åº“**
   - åœ¨ Cloudflare Dashboard ä¸­è¿›å…¥ Workers & Pages â†’ D1
   - åˆ›å»ºæ–°æ•°æ®åº“ï¼Œå‘½åä¸º `newsnow`
   - è®°å½•æ•°æ®åº“ ID

3. **é…ç½®ç¯å¢ƒå˜é‡**
   åœ¨ Cloudflare Pages é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   ```
   G_CLIENT_ID=ä½ çš„GitHub_Client_ID
   G_CLIENT_SECRET=ä½ çš„GitHub_Client_Secret
   JWT_SECRET=ä½ çš„GitHub_Client_Secret
   INIT_TABLE=true
   ENABLE_CACHE=true
   ```

4. **é…ç½®æ•°æ®åº“ç»‘å®š**
   - åˆ›å»º `wrangler.toml` æ–‡ä»¶ï¼ˆå¯å‚è€ƒ `example.wrangler.toml`ï¼‰
   - æ·»åŠ æ•°æ®åº“é…ç½®å¹¶é‡æ–°éƒ¨ç½²

### æ–¹å¼äºŒï¼šVercel éƒ¨ç½²

1. Fork æœ¬é¡¹ç›®
2. ç™»å½• [Vercel](https://vercel.com)
3. å¯¼å…¥é¡¹ç›®
4. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆåŒä¸Šï¼‰
5. æ³¨æ„ï¼šVercel éƒ¨ç½²éœ€è¦è‡ªè¡Œé…ç½®æ•°æ®åº“

### æ–¹å¼ä¸‰ï¼šæœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/ourongxing/newsnow.git
   cd newsnow
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   corepack enable
   pnpm install
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp example.env.server .env.server
   # ç¼–è¾‘ .env.server æ–‡ä»¶ï¼Œå¡«å…¥é…ç½®
   ```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   pnpm dev
   ```

   è®¿é—® http://localhost:3000

### æ–¹å¼å››ï¼šDocker éƒ¨ç½²

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/ourongxing/newsnow.git
   cd newsnow
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡**
   ç¼–è¾‘ `docker-compose.yml` æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡

3. **å¯åŠ¨å®¹å™¨**
   ```bash
   docker compose up -d
   ```

## ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å | è¯´æ˜ | æ˜¯å¦å¿…éœ€ | ç¤ºä¾‹å€¼ |
|--------|------|----------|--------|
| G_CLIENT_ID | GitHub OAuth Client ID | ç™»å½•åŠŸèƒ½å¿…éœ€ | `Iv1.a1b2c3d4e5f6g7h8` |
| G_CLIENT_SECRET | GitHub OAuth Client Secret | ç™»å½•åŠŸèƒ½å¿…éœ€ | `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0` |
| JWT_SECRET | JWT å¯†é’¥ï¼Œé€šå¸¸ä¸ Client Secret ç›¸åŒ | ç™»å½•åŠŸèƒ½å¿…éœ€ | åŒä¸Š |
| INIT_TABLE | æ˜¯å¦åˆå§‹åŒ–æ•°æ®åº“è¡¨ | é¦–æ¬¡è¿è¡Œå¿…éœ€ | `true` |
| ENABLE_CACHE | æ˜¯å¦å¯ç”¨ç¼“å­˜ | å¦ | `true` |

## éƒ¨ç½²éªŒè¯

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®æ‚¨çš„åŸŸåï¼Œæ£€æŸ¥ä»¥ä¸‹åŠŸèƒ½ï¼š

1. âœ… ç½‘ç«™æ­£å¸¸åŠ è½½
2. âœ… æ–°é—»å†…å®¹æ­£å¸¸æ˜¾ç¤º
3. âœ… ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼ˆå¦‚å·²é…ç½®ï¼‰
4. âœ… æ•°æ®åˆ·æ–°åŠŸèƒ½

## å¸¸è§é—®é¢˜

### Q: éƒ¨ç½²åæ˜¾ç¤ºç©ºç™½é¡µé¢ï¼Ÿ
A: æ£€æŸ¥æ„å»ºå‘½ä»¤å’Œè¾“å‡ºç›®å½•æ˜¯å¦æ­£ç¡®é…ç½®

### Q: ç™»å½•åŠŸèƒ½ä¸å¯ç”¨ï¼Ÿ
A: æ£€æŸ¥ GitHub OAuth é…ç½®å’Œç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥æ•°æ®åº“é…ç½®å’Œç¯å¢ƒå˜é‡ï¼Œç¡®ä¿ INIT_TABLE=true é¦–æ¬¡è¿è¡Œ

### Q: æ–°é—»å†…å®¹ä¸æ›´æ–°ï¼Ÿ
A: æ£€æŸ¥ç¼“å­˜è®¾ç½®ï¼Œç™»å½•ç”¨æˆ·å¯ä»¥å¼ºåˆ¶åˆ·æ–°

## é¡¹ç›®ç»´æŠ¤

### æ›´æ–°é¡¹ç›®
```bash
git pull origin main
pnpm install
pnpm build
```

### æ·»åŠ æ–°é—»æº
å‚è€ƒ `shared/sources` å’Œ `server/sources` ç›®å½•ï¼Œé¡¹ç›®æä¾›äº†å®Œæ•´çš„ç±»å‹å®šä¹‰ã€‚

## æŠ€æœ¯æ”¯æŒ

å¦‚éœ€æŠ€æœ¯æ”¯æŒæˆ–å®šåˆ¶å¼€å‘ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- GitHub Issues: https://github.com/ourongxing/newsnow/issues
- é¡¹ç›®ä½œè€…: ourongxing

---

ğŸ“ **éƒ¨ç½²è®°å½•**
- é¡¹ç›®å…‹éš†æ—¶é—´: {{ å½“å‰æ—¶é—´ }}
- éƒ¨ç½²æ–¹å¼: {{ å¾…ç¡®å®š }}
- çŠ¶æ€: {{ è¿›è¡Œä¸­ }} 